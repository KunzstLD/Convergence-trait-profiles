---
title: "Tables convergence trait profiles"
output: html_document
knit: (function(inputFile, encoding) {
  rmarkdown::render(inputFile, encoding = encoding, output_dir = "/home/kunzst/Dokumente/Projects/Trait_DB/Convergence-trait-profiles/Paper/Tables/") })
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, echo = FALSE}
# Set up
library(data.table)
library(reactable)
library(htmltools)
```

## Table 2

Contribution of grouping features to the global distances.

```{r, echo = FALSE}
# Load data global distances
global_dist <- readRDS("/home/kunzst/Dokumente/Projects/Trait_DB/Convergence-trait-profiles/Cache/global_dist.rds")
global_dist <- rbindlist(global_dist, idcol = "continent")

reactable(global_dist[, .(continent, grouping_feature, global_dist = round(`global distance`, digits = 2))],
          columns = list(continent = colDef(name = "Continent"), 
                         grouping_feature = colDef(name = "Grouping feature"),
                         global_dist = colDef(name = "Global distance",
                                              align = "center")), 
          filterable = TRUE,
          highlight = TRUE)
```

## Table 3

Multi-category brier (mBrier) score of the test and training data for the fitted random forest models. 

```{r, echo = FALSE}
brier_scores <- readRDS("/home/kunzst/Dokumente/Projects/Trait_DB/Convergence-trait-profiles/Cache/perf_summary.rds")

reactable(
  brier_scores[, .(
    continent,
    mbrier_score_test = round(mbrier_score_test, digits = 2),
    mbrier_score_train = round(mbrier_score_train, digits = 2)
  )],
  columns = list(
    continent = colDef(name = "Continent",
                       width = 120),
    mbrier_score_test = colDef(name = "mBrier score test data"),
    mbrier_score_train = colDef(name = "mBrier score training data")
  )
)

```

## Table 4

```{r, echo = FALSE}

# summary_cr_taxa <- readRDS("/home/kunzst/Dokumente/Projects/Trait_DB/Convergence-trait-profiles/Cache/Cache_comparison_climatic_reg/summary_cr_taxa.rds")
# 
# reactable(
#   summary_cr_taxa,
#   highlight = TRUE,
#   columns = list(
#     `Nr. Taxa EU` = colDef(name = "Nr. Taxa EU (mostly species lvl)"),
#     `Nr. Taxa NOA` = colDef(name = "Nr. Taxa NOA (genus lvl)")
#   ))
```
